Horn.TargetSelect=Horn.extend(Horn.Field,{COMPONENT_CLASS:"TargetSelect",field:null,hidden:null,name:null,alias:null,callback:null,init:function(b){Horn.TargetSelect.superclass.init.apply(this,arguments);var c=this;this.select=this.el;this.hidden=this.select.children("input[type='hidden']");this.field=this.hidden.next();this.name=this.hidden.attr("name");this.alias=this.hidden.attr("alias")||"";if(this.params.afterClear){var a=this.params.afterClear.replace("(","").replace(")","");this.callback=window[a]}var c=this;this.el.children("a").bind({click:Horn.Util.apply(c.delVal,c)})},setValue:function(a){var b=this.getValue();if(a==null||a==""){this.field.val("");this.hidden.val("")}else{if(a instanceof Object){this.field.val(a.label);this.hidden.val(a.key)}else{Horn.Msg.alert("输入错误，传入的值必须是json格式：{'label':'这里输入显示名称','key':'这里输入提交后台的id'},如：{'label':'周智星','key':'1'}");return}}if(a&&a.key!=b){this.getEventTarget().trigger("change")}this.validate()},getText:function(){var a=this.field.val();return a},delVal:function(){if(this.params.disabled){return}var b=this;var a=this.field.val();if(a!=""){Horn.Msg.confirm("确认","你确定要清除该值？",function(){b.hidden.val("");b.field.val("");if(b.callback){b.callback()}},function(){})}}});Horn.Field.regFieldType("div.hc_inputsearch",Horn.TargetSelect);