Horn.RadioGroup=Horn.extend(Horn.Field,{COMPONENT_CLASS:"RadioGroup",radios:null,name:null,alias:null,checkRegx:[],init:function(){Horn.RadioGroup.superclass.init.apply(this,arguments);this.radios=this.el.find("input[type='radio']");this.name=this.el.attr("name");this.alias=this.el.attr("alias")||"";if(this.params.check&&this.params.check.indexOf("required")>-1){this.checkRegx=[Horn.Validate.REQUIRED]}if(this.params.value){this.setValue(this.params.value)}if(this.params.disabled){this.setDisabled(true)}this.defValue=this.params.defValue||this.params.value||"";var b=this;var a=this.el.children("div").children("label").find("input:radio");a.each(function(c,d){$(d).bind("click",function(){var f=b.getValue();var e=$(d).attr(Horn.Validate.CHECK);if(f&&f!=""){b.removeError();if(e&&e.indexOf(Horn.Validate.REQUIRED)>-1){b.el.addClass("m-verify-success")}}else{b.showError();b.el.removeClass("m-verify-success")}})})},getEventTarget:function(){return this.el.children("div").children("label").find("input[type='radio']")},getValue:function(){return this.radios.filter(":checked").val()||""},setValue:function(c){var b=this;var a=this.radios;c=c.toString();if(c==""){this.radios.removeAttr("checked")}else{if(this.radios.filter('[value="'+c+'"]').length>0){if(this.radios.filter('[value="'+c+'"]').attr("disabled")){setTimeout(function(){a.attr("disabled","disabled");a.removeAttr("checked");a.filter('[value="'+c+'"]').prop("checked",true)},10)}else{a.removeAttr("checked");a.each(function(d,e){if($(e).val()==c){$(e).prop("checked",true)}})}}}this.validate()},clearValue:function(){this.setValue("")},setEnable:function(a){var b=this;this.radios.each(function(c,d){if(a===false){$(this).attr("disabled","disabled")}else{$(this).removeAttr("disabled")}})},setDisabled:function(a){var b=this;if(a===true){b.disabled=true}else{if(a===false){b.disabled=false}}this.radios.each(function(c,d){if(a===true){$(this).attr("disabled","disabled")}else{$(this).removeAttr("disabled")}})},validate:function(){this.isValid()},isValid:function(){var a=true;var d=this;var b=this.name;if(d.disabled==true){return true}if(this.checkRegx.length>0){var c=Horn.getComp(b).getValue();if(c==""){a=false;this.showError(d)}else{this.removeError(d)}}return a},showError:function(b){if(!this.msgDiv){this.msgDiv=$('<div class="m-verify-tip bottom" role="m-verify-tip" style="display: none;"></div>');this.el.after(this.msgDiv)}var a=this.msgDiv;a.html('<div class="verify-tip-arrow"></div><div class="verify-tip-inner">当前单选选框不能为空</div>');a.css("display","block");b.el.addClass("m-verify-error");b.err=true},removeError:function(c){this.el.removeClass("m-verify-error");this.err=false;var b=this.msgDiv;if(b){b.remove()}var a=this.el.parent().parent(".g-unit-wrap").children(".unit-label");delete this.msgDiv},reset:function(){this.setValue(this.defValue)},addRule:function(e){if(e&&e.indexOf(Horn.Validate.REQUIRED)>-1){var f=this;var b=f.el.children("div").children("label").find("input:radio[check*=required]");if(b&&b.size()>0){return}else{f.err=true;this.checkRegx=e.split(";");var a=f.el.children("div").children("label").find("input:radio");a.each(function(g,i){var h=$(i).attr(Horn.Validate.CHECK);if(h){if(h.indexOf(e)>-1){return}h+=Horn.Validate.CHECKSEP+e}else{h=e}$(i).attr(Horn.Validate.CHECK,h)});if(e&&e.indexOf(Horn.Validate.REQUIRED)>-1){var c=this.el.parent().parent(".g-unit-wrap").children(".unit-label");var d=$("span.m-verify-symbol",c);if(!d.length){d=$("<span>",{"class":"m-verify-symbol",html:"*"});c.prepend(d)}else{d.html("*")}}}}else{return}},removeRule:function(d){var f=this;var a=f.el.children("div").children("label").find("input:radio");a.each(function(g,j){var h=$(j).attr(Horn.Validate.CHECK);if(h&&h.indexOf(d)>-1){var i=h.split(Horn.Validate.CHECKSEP);i=$.grep(i,function(l,k){return l&&l!=d});$(j).attr(Horn.Validate.CHECK,i.join(";"))}});this.checkRegx=[];if(d&&d.indexOf(Horn.Validate.REQUIRED)>-1){this.el.removeClass("m-verify-success");this.el.removeClass("m-verify-error");var b=this.el.parent().parent(".g-unit-wrap").children(".unit-label");var c=$("span.m-verify-symbol",b);if(c){c.remove()}var e=this.msgDiv;if(e){e.remove()}}}});Horn.Field.regFieldType("div.hc_radio-group",Horn.RadioGroup);