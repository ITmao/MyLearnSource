Horn.Util.Format={Patterns:{YEAR:/y/g,MONTH:/M/g,DAY:/d/g,HOUR:/H/g,MINUTE:/m/g,SECOND:/s/g,MILSECOND:/f/g},FormatPatterns:function(format){return eval("/"+format.replace(this.Patterns.YEAR,"[0-9]").replace(this.Patterns.MONTH,"[0-9]").replace(this.Patterns.DAY,"[0-9]").replace(this.Patterns.HOUR,"[0-9]").replace(this.Patterns.MINUTE,"[0-9]").replace(this.Patterns.SECOND,"[0-9]").replace(this.Patterns.MILSECOND,"[0-9]")+"/g")},DateISO:function(a,c){var b="";if(a==""||c==""){return false}b=this.FormatPatterns(c);return b.test(a)},number:function(q,o){if(!o){return q}q=Number(q===null||typeof q=="boolean"?NaN:q);if(isNaN(q)){return""}var s=",",f=".",r=false,g=q<0;q=Math.abs(q);if(o.substr(o.length-2)=="/i"){o=o.substr(0,o.length-2);r=true;s=".";f=","}var b=o.indexOf(s)!=-1,a=(r?o.replace(/[^\d\,]/g,""):o.replace(/[^\d\.]/g,"")).split(f);if(1<a.length){q=q.toFixed(a[1].length)}else{if(2<a.length){throw ("NumberFormatException: invalid format, formats should have no more than 1 period: "+o)}else{q=q.toFixed(0)}}var p=q.toString();if(b){a=p.split(".");var l=a[0],e=[],h=l.length,d=Math.floor(h/3),c=l.length%3||3;for(var k=0;k<h;k+=c){if(k!=0){c=3}e[e.length]=l.substr(k,c);d-=1}p=e.join(s);if(a[1]){p+=f+a[1]}}return(g?"-":"")+o.replace(/[\d,?\.?]+/,p)},date:function(g,a){var c=g;if((typeof g)=="string"){g=g.trim();var d=g;var f=function(h){h=h||"";if(h.indexOf("/")==-1&&h.indexOf("-")==-1){return h.substring(0,4)+"/"+h.substring(4,6)+"/"+h.substring(6)||""}return h.replace(/\D+/g,"/")};g=f(g);var e=g.split("/");while(e.length<3){e.push("01")}g=e.join("/")}var b=new Date(g)=="Invalid Date"?new Date(Number(c)):new Date(g);if(b=="Invalid Date"||isNaN(b)){return d}else{return b.format(a)}},all:function(b,c,d){if(b=="DATE"){if(c==null||c==undefined||c.length==0){c="yyyy-MM-dd HH:mm:ss"}var a=Horn.Util.Format.date(d,c);return a}else{if(b=="AMOUNT"){if(c==null||c==undefined||c.length==0){c="0,000.00"}return Horn.Util.Format.number(d,c)}else{return d}}},validateFmt:function(f,b){var a="^\\d{4}\\d{1,2}\\d{1,2}$";var e=true;if(b){if(b.length>10){e=Horn.Util.Format.DateISO(f,b)}else{if(b.length>8){var d=b.charAt(4);var c=b.charAt(7);var a="^\\d{4}"+d+"\\d{1,2}"+c+"\\d{1,2}$";e=(new RegExp(a)).test(f)}else{e=(new RegExp(a)).test(f)}}}else{e=false}return e}};Date.prototype.format=function(a){var d={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};var c={"0":"/u65e5","1":"/u4e00","2":"/u4e8c","3":"/u4e09","4":"/u56db","5":"/u4e94","6":"/u516d"};if(/(y+)/.test(a)){a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))}for(var b in d){if(new RegExp("("+b+")").test(a)){a=a.replace(RegExp.$1,(RegExp.$1.length==1)?(d[b]):(("00"+d[b]).substr((""+d[b]).length)))}}return a};