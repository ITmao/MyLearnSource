var Horn=Horn||{};(function(H){Horn.Util={dictCache:{},apply:function(fn,scope){return(function(){return fn.apply(scope,arguments)})},getFunObj:function(event){if(event==""||!event){return{}}var name=event;var params=[];if(event.indexOf("(")>-1){name=event.substring(0,event.indexOf("("));var ps=event.substring(event.indexOf("(")+1,event.indexOf(")")).split(",");for(var i=0;i<ps.length;i++){if(ps[i]){params.push(eval("("+ps[i]+")"))}}}return{fn:eval("(window."+name+")"),params:params}},stopPropagation:function(e){if(e&&e.stopPropagation){e.stopPropagation()}else{window.event.cancelBubble=true}},obj2Arr:function(obj){var arr=[];if($.type(obj)=="object"){for(var i in obj){if("string,number,boolean".indexOf($.type(obj[i]))>-1){arr.push({name:i,value:obj[i]})}}}return arr},arr2Obj:function(serValues){var values={};for(var i=0;i<serValues.length;i++){var name=serValues[i]["name"];var value=serValues[i]["value"];if(values[name]!==undefined&&values[name]!==""&&values[name]!==null){values[name]=values[name]+"";if(values[name]){values[name]=values[name]+","+value}else{values[name]=value}}else{values[name]=value}}return values},getValues:function(form){var serValues=$(form).serializeArray();var values=this.arr2Obj(serValues);return values},encode:function(object){return(function(){var _this=this;if(_this===null||_this===undefined){return""}if(_this instanceof Function||_this instanceof RegExp){return _this.toString()}if(_this instanceof String){return'"'+_this.toString()+'"'}if(_this instanceof Boolean||_this instanceof Number){return _this.toString()}if(_this instanceof Date){return _this.getTime()}if(_this instanceof Object||_this instanceof Array){var tempArr=new Array;if(_this instanceof Array){for(var i=0;i<_this.length;i++){tempArr.push(arguments.callee.call(_this[i]))}}else{for(var fieldname in _this){if(_this[fieldname]==null||_this[fieldname]==undefined){tempArr.push(arguments.callee.call(fieldname)+':""');continue}if(jQuery.type(_this[fieldname])=="function"||jQuery.type(_this[fieldname])=="regexp"){continue}if(_this[fieldname] instanceof Object){tempArr.push(arguments.callee.call(fieldname)+":"+arguments.callee.call(_this[fieldname]));continue}tempArr.push(arguments.callee.call(fieldname)+":"+arguments.callee.call(_this[fieldname]))}}var retString=tempArr.join("");if(_this instanceof Array){retString="["+tempArr.join(",")+"]"}else{retString="{"+tempArr.join(",")+"}"}return retString}else{return _this.toString()}}).call(object)},decode:function(string){return jQuery.parseJSON(string)},getParamValue:function(name){var value=location.search.match(new RegExp("[?&]"+name+"=([^&]*)(&?)","i"));return value?value[1]:value},loadBp:function(d,url,data,method,callback){function render(obj,bp){obj.children().remove();BigPipe.onArrive(bp);BigPipe.start();H.getUIReady()(obj);if(callback){callback.call(obj,obj,bp)}}data=data||{};var id=d;var dom=d;if(typeof d=="object"){dom=$(d);if(!dom.attr("id")){dom.attr("id",H.id())}id=dom.attr("id")}else{if(typeof d=="string"){dom=$("#"+id)}else{return}}url=(url.indexOf("?")===-1?url+"?":url+"&")+"pagelet="+id;if(url.indexOf("http")==-1){url=context_path+url}if(method=="get"){$.get(url,data,function(result){render(dom,eval("("+result+")"))})}else{$.post(url,data,function(result){render(dom,eval("("+result+")"))})}},serializeObject:function(param){function serArray(per,p){var arr=per[p];for(var i=0;i<arr.length;i++){var obj=arr[i];for(var prop in obj){if("string,boolean,number".indexOf(jQuery.type(obj[prop]))>-1){per[p+"["+i+"]."+prop]=obj[prop]}}}}if(param&&typeof param=="object"){for(var p in param){if(jQuery.type(param[p])=="array"){serArray(param,p);delete param[p]}}}return param},loadCss:function(url){BigPipe.onArrive({html:"",id:H.id(),css:[url],js:[],jsCode:""})},loadScript:function(url){BigPipe.onArrive({html:"",id:H.id(),css:[],js:[url],jsCode:""});BigPipe.start()},jump:function(url,reload){if(Horn.TabScreen){this.loadBp(Horn.getCurrent(),url,{},"get")}else{if(reload){url=(url.indexOf("?")===-1?url+"?":url+"&")+"_="+new Date().getTime()}window.location=url}},getDicts:function(dictName,keys){Horn.Util.dictCache=Horn.cachedDicts;if(!Horn.Util.dictCache[dictName]){Horn.getDict(dictName);Horn.Util.dictCache=Horn.cachedDicts}if(keys){if(keys.indexOf(",")!=-1){var ks=keys.split(",");var values="";$.each(ks,function(i,key){if(key){values+=","+Horn.Util.dictCache[dictName][key]}});return values&&(values.indexOf(",")!=-1?values.substring(1):values)}else{return Horn.Util.dictCache[dictName][keys]}}else{return Horn.Util.dictCache[dictName]}}}})(Horn);String.prototype.toCharArray=function(){return this.split("")};String.prototype.repeat=function(b){var a=[];for(var c=0;c<b;c++){a.push(this)}return a.join("")};String.prototype.reverse=function(){return this.split("").reverse().join("")};String.prototype.isNumeric=function(){var b=parseFloat(this);if(isNaN(b)){return false}var a=this.length-b.toString().length;return b+"0".Repeat(a)==this};String.prototype.isInt=function(){if(this=="NaN"){return false}return this==parseInt(this).toString()};String.prototype.resetBlank=function(){return this.replace(/\s+/g," ")};String.prototype.ltrim=function(){return this.replace(/^\s+/g,"")};String.prototype.rtrim=function(){return this.replace(/\s+$/g,"")};String.prototype.trim=function(){return this.replace(/(^\s+)|(\s+$)/g,"")};String.prototype.getNum=function(){return this.replace(/[^\d]/g,"")};String.prototype.getEn=function(){return this.replace(/[^A-Za-z]/g,"")};String.prototype.getCn=function(){return this.replace(/[^\u4e00-\u9fa5\uf900-\ufa2d]/g,"")};String.prototype.getRealLength=function(){return this.replace(/[^x00-xff]/g,"--").length};String.prototype.left=function(a){return this.slice(0,a)};String.prototype.right=function(a){return this.slice(this.length-a)};String.prototype.HTMLEncode=function(){var c=this;var a=[/x26/g,/x3C/g,/x3E/g,/x20/g];var d=["&","<",">"," "];for(var b=0;b<a.length;b++){c=c.replace(a[b],d[b])}return c};String.prototype.ascW=function(){var a="";for(var b=0;b<this.length;b++){a+="&#"+this.charCodeAt(b)+";"}return a};String.prototype.firstUp=function(){return this.replace(/(^|\s+)\w/g,function(a){return a.toUpperCase()})};String.leftPad=function(c,b,a){if(!c){return c}if(b!==undefined&&b!==""&&a>0){c=c+"";b=b+"";while(c.length<a){c=b+c}}return c};if(!Array.indexOf){Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++){if(this[b]==a){return b}}return -1}};